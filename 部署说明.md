# 管理者调研报告 App — 部署为公开页面

把本应用部署到公网后，任何人通过浏览器打开链接即可使用（上传自己的问卷底表、查看报告）。

---

## 方式一：Streamlit Community Cloud（推荐，免费）

**适合**：快速上线、免服务器、免费额度足够个人/小团队使用。

### 1. 准备代码仓库

- 在 [GitHub](https://github.com) 新建一个仓库（可私有，仅部署时授权给 Streamlit）。
- 把当前项目**除本地数据外**的文件推上去，建议包含：
  - `app.py`
  - `config.py`
  - `data_processor.py`
  - `requirements.txt`
  - `.streamlit/config.toml`
  - `wordcloud_mask.png`（可选，无则词云无卡通蒙版）
- **不要**把 `原始底表.xlsx` 推上去（已在 `.gitignore` 中），部署后所有人用「左侧上传」上传自己的文件即可。

### 2. 在 Streamlit Cloud 部署

1. 打开 [https://share.streamlit.io](https://share.streamlit.io)，用 **GitHub 账号**登录。
2. 点击 **“New app”**。
3. 选择你的仓库、分支，**Main file path** 填：`app.py`。
4. **Advanced settings** 里可留空（如需环境变量再填）。
5. 点击 **Deploy**，等待构建完成。
6. 完成后会得到一个公网链接，例如：`https://xxx.streamlit.app`，分享该链接即可让所有人使用。

### 3. 使用说明（给最终用户）

- 打开链接 → 在**左侧边栏**上传自己的 `.xlsx` 或 `.csv` 问卷底表 → 阅读知悉页后进入报告。
- 无需安装任何软件，仅需浏览器。

---

## 方式二：自建服务器 / 云主机

**适合**：数据不能出内网、或需要完全自管。

1. 在一台有公网 IP 或可被访问的机器上安装 Python 3.10+，克隆本仓库并安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
2. 启动应用（示例端口 8501）：
   ```bash
   streamlit run app.py --server.port 8501 --server.address 0.0.0.0
   ```
3. 若需通过域名访问或 HTTPS，可在前面加 Nginx 等做反向代理。

---

## 方式三：Docker 运行（可选）

在项目根目录创建 `Dockerfile` 后，可一键构建镜像并在任意支持 Docker 的环境运行，例如：

```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
EXPOSE 8501
CMD ["streamlit", "run", "app.py", "--server.port=8501", "--server.address=0.0.0.0"]
```

构建与运行示例：

```bash
docker build -t survey-report-app .
docker run -p 8501:8501 survey-report-app
```

---

## 部署后行为说明

- **数据上传**：所有使用均通过页面左侧「数据上传」上传各自的 Excel/CSV，**不会**使用你本地的 `原始底表.xlsx`（部署仓库中也可不包含该文件）。
- **词云图**：若仓库中包含 `wordcloud_mask.png`，词云会带卡通蒙版；若不包含，词云仍可正常生成，仅无蒙版。
- **配置**：问卷维度、题目列名等可在 `config.py` 中按需修改后重新部署。

按上述任一种方式部署完成后，即可把应用当作**所有人都可以使用的公开页面**使用。
